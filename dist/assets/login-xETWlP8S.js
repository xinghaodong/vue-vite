import{u as S,m as V,s as x,r as f,o as y,n as $,a as C,b as u,c as U,d as q,e,p as B,f as l,w as i,q as Q,l as R,j as F,g as N,v as T}from"./index-vnRDGDmm.js";const z=""+new URL("QQ-B1nMaUiu.png",import.meta.url).href,M={class:"box"},j={class:"login-wrapper"},D=e("div",{class:"mask"},null,-1),E={class:"login-content"},L=e("h1",null,"登 录",-1),A=e("div",{class:"title-text"},"欢迎来到这个界面，您可以通过这个界面登录到系统，也可以选择其他的登录方式.",-1),G={class:"other-login"},H=e("img",{src:z,alt:""},null,-1),J=e("span",null,"使用QQ登录",-1),K=[H,J],O={class:"login-form"},X={__name:"login",setup(P){const g=S(),{proxy:a}=F(),v=V(),{editableTabsValue:b}=x(v);let r=null,n=f(0);y(async()=>{console.log(a.$api,"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"),d(),r=setInterval(()=>{d()},5e3),a.$websocket.socket&&a.$websocket.close()}),$(()=>{r&&(clearInterval(r),r=null)});const d=()=>(n.value%2==0?document.querySelector(".other-login").style.backgroundColor="rgb(248, 182, 217)":document.querySelector(".other-login").style.backgroundColor="rgb(182, 211, 248)",n.value==4?n.value=1:n.value++,d),h={name:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},t=C({name:"",password:""}),m=f(null),w=_=>{_.validate(async o=>{if(o){const s=await a.$api.login(t);s.code==200&&(g.changeUserInfo(s.data),localStorage.setItem("token",s.token),localStorage.setItem("refresh",s.refresh),a.$router.push(b.value||"/index"),a.$message.success(s.message))}else return!1})};return(_,o)=>{const s=u("el-input"),p=u("el-form-item"),k=u("el-button"),I=u("el-form");return U(),q("div",M,[e("div",{class:Q(["content",[`bg-${R(n)}`]])},[e("div",j,[D,e("div",E,[L,A,B(e("div",G,K,512),[[T,!1]]),l(I,{ref_key:"ruleFormRef",ref:m,rules:h,model:t,"label-width":"100px",size:"mini"},{default:i(()=>[e("div",O,[l(p,{label:"账号",prop:"name"},{default:i(()=>[l(s,{class:"user",modelValue:t.name,"onUpdate:modelValue":o[0]||(o[0]=c=>t.name=c)},null,8,["modelValue"])]),_:1}),l(p,{label:"密码",prop:"password"},{default:i(()=>[l(s,{class:"password",modelValue:t.password,"onUpdate:modelValue":o[1]||(o[1]=c=>t.password=c)},null,8,["modelValue"])]),_:1})]),l(k,{class:"login-btn",onClick:o[2]||(o[2]=c=>w(m.value))},{default:i(()=>[N("登 录")]),_:1})]),_:1},8,["model"])])])],2)])}}};export{X as default};
